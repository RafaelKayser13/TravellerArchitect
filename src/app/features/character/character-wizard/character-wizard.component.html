<div class="tablet-container">
  <div class="tablet-hardware">
    <!-- Screen Glare Overlay -->
    <div class="screen-glare"></div>
    
    <!-- Circuitry Overlays -->
    <div class="hw-circuits top"></div>
    <div class="hw-circuits bottom"></div>

    <!-- Physical Hardware Details -->
    <div class="hw-bezel-detail top">
      <div class="sensor-eye"></div>
      <div class="branding">TACTICAL_INTERFACE_v4.2</div>
      <div class="status-leds">
        <div class="led power-on"></div>
        <div class="led data-link pulse"></div>
        <div class="led sync-blink"></div>
      </div>
      <div class="battery-meter">
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar dim"></div>
      </div>
    </div>

    <!-- Corner Reinforcements -->
    <div class="hw-corner top-left"></div>
    <div class="hw-corner top-right"></div>
    <div class="hw-corner bottom-left"></div>
    <div class="hw-corner bottom-right"></div>
    
    <div class="hw-bezel-detail left">
      <div class="grip-strip"></div>
      <div class="vent-grill"></div>
      <div class="comm-link"></div>
    </div>
    
    <div class="hw-bezel-detail right">
      <div class="fingerprint-sensor"></div>
      <div class="vent-grill"></div>
      <div class="hw-button"></div>
      <div class="hw-button long"></div>
      <div class="hw-button"></div>
    </div>

    <div class="wizard-frame">
      <!-- Step Progress -->
      <div class="step-progress">
        <div class="step" [class.active]="currentStep >= 1" [class.current]="currentStep === 1" (click)="goToStep(1)">
          <div class="circle">01</div>
          <span class="label">IDENTITY</span>
        </div>
        <div class="line" [class.active]="currentStep > 1"></div>

        <div class="step" [class.active]="currentStep >= 2" [class.current]="currentStep === 2" (click)="goToStep(2)">
          <div class="circle">02</div>
          <span class="label">SPECIES</span>
        </div>
        <div class="line" [class.active]="currentStep > 2"></div>

        <div class="step" [class.active]="currentStep >= 3" [class.current]="currentStep === 3" (click)="goToStep(3)">
          <div class="circle">03</div>
          <span class="label">BIOMETRICS</span>
        </div>
        <div class="line" [class.active]="currentStep > 3"></div>

        <div class="step" [class.active]="currentStep >= 4" [class.current]="currentStep === 4" (click)="goToStep(4)">
          <div class="circle">04</div>
          <span class="label">ORIGIN</span>
        </div>
        <div class="line" [class.active]="currentStep > 4"></div>

        <div class="step" [class.active]="currentStep >= 5" [class.current]="currentStep === 5" (click)="goToStep(5)">
          <div class="circle">05</div>
          <span class="label">EDUCATION</span>
        </div>
        <div class="line" [class.active]="currentStep > 5"></div>

        <div class="step" [class.active]="currentStep >= 6" [class.current]="currentStep === 6" (click)="goToStep(6)">
          <div class="circle">06</div>
          <span class="label">CAREER</span>
        </div>
        <div class="line" [class.active]="currentStep > 6"></div>

        <div class="step" [class.active]="currentStep >= 7" [class.current]="currentStep === 7" (click)="goToStep(7)">
          <div class="circle">07</div>
          <span class="label">MUSTER</span>
        </div>
        <div class="line" [class.active]="currentStep > 7"></div>

        <div class="step" [class.active]="currentStep >= 8" [class.current]="currentStep === 8" (click)="goToStep(8)">
          <div class="circle">08</div>
          <span class="label">NETWORK</span>
        </div>
        <div class="line" [class.active]="currentStep > 8"></div>

        <div class="step" [class.active]="currentStep >= 9" [class.current]="currentStep === 9" (click)="goToStep(9)">
          <div class="circle">09</div>
          <span class="label">PROFILE</span>
        </div>
        <div class="line" [class.active]="currentStep > 9"></div>

        <div class="step" [class.active]="currentStep >= 10" [class.current]="currentStep === 10" (click)="goToStep(10)">
          <div class="circle">10</div>
          <span class="label">FINALIZE</span>
        </div>
      </div>

      <!-- Content Area -->
      <div class="wizard-content" *ngIf="!isResetting">
        <app-identity *ngIf="currentStep === 1" (complete)="nextStep()"></app-identity>
        <app-species *ngIf="currentStep === 2" (complete)="nextStep()"></app-species>
        <app-attributes *ngIf="currentStep === 3" (stateChange)="cdr.detectChanges()" (complete)="nextStep()"></app-attributes>
        <app-origin *ngIf="currentStep === 4" (complete)="nextStep()"></app-origin>
        <app-education *ngIf="currentStep === 5" (complete)="nextStep()"></app-education>
        <app-career *ngIf="currentStep === 6" (onComplete)="onCareerComplete()" (complete)="onCareerComplete()"></app-career>
        <app-mustering-out *ngIf="currentStep === 7" (complete)="onMusteringOutComplete()"></app-mustering-out>
        <app-npc-management *ngIf="currentStep === 8" (complete)="onNpcManagementComplete()"></app-npc-management>
        <app-skill-package *ngIf="currentStep === 9" (complete)="onSkillPackageComplete()"></app-skill-package>
        <app-character-sheet *ngIf="currentStep === 10"></app-character-sheet>
      </div>

      <!-- Unified Sticky Action Bar -->
      <footer class="wizard-action-bar" *ngIf="showActionBar">
        <div class="action-divider"></div>
        <div class="action-content">
          <button class="btn-reset-footer" (click)="initiateReset()" title="Reset Character Data">
            <span class="icon">↺</span>
            <span class="label">RESET</span>
          </button>
          
          <button class="btn-wizard-next" [disabled]="!actionEnabled" (click)="onActionClick()">
            <span class="btn-index">SYS::CMD</span>
            <span class="btn-label">{{ actionLabel }} ▸</span>
          </button>
        </div>
      </footer>
    </div>

    <div class="hw-bezel-detail bottom">
      <div class="io-port"></div>
      <div class="speaker-slits"></div>
    </div>
  </div>
</div>

<!-- Reset Dialog -->
<app-confirmation-dialog [isOpen]="showResetDialog" title="RESET DATA"
  message="Are you sure you want to delete this character and start over? This action cannot be undone."
  (confirm)="confirmReset()" (cancel)="cancelReset()">
</app-confirmation-dialog>