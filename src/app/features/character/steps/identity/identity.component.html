<div class="identity-container fade-in">
    <app-step-header 
        stepSymbol="SEC" 
        stepNumber="01" 
        superLabel="ACCESS_LOG_V2.1"
        topLabel="IDENTITY_PROFILE"
        title="IDENTITY_ESTABLISHMENT" 
        subtitle="ACCESSING_LEGAL_DATABASE... [ OK ]">
    </app-step-header>

    <div class="identity-grid">
        <!-- Left Column: Primary Data -->
        <div class="hud-module form-section">
            <div class="corner-detail tl"></div>
            <div class="corner-detail tr"></div>
            <div class="corner-detail bl"></div>
            <div class="corner-detail br"></div>
            
            <div class="hud-box-header mini">
                <span class="index">ID_01</span>
                <h3>BIOMETRIC_DATA_INPUT</h3>
            </div>

            <div class="hud-content">
                <!-- Row 1: Legal Name -->
                <div class="input-group">
                    <label for="char-name">LEGAL_CHARACTER_NAME <span class="required">*</span></label>
                    <div class="input-with-button">
                        <input id="char-name" type="text" [(ngModel)]="charName" (ngModelChange)="save()" 
                               placeholder="ENTER_NAME_HERE" title="Subject legal name">
                        <button class="btn-cyber-outline mini" (click)="generateRandomName()" title="Generate Random Designation">
                            AUTO_GEN
                        </button>
                    </div>
                </div>

                <!-- Row 2: Codename & Player Signature -->
                <div class="input-row">
                    <div class="input-group">
                        <label for="nickname">TACTICAL_CODENAME</label>
                        <input id="nickname" type="text" [(ngModel)]="nickname" (ngModelChange)="save()" 
                               placeholder="OPTIONAL_ID" title="Subject nickname or codename">
                    </div>
                    <div class="input-group">
                        <label for="player-name">PLAYER_SIGNATURE</label>
                        <input id="player-name" type="text" [(ngModel)]="playerName" (ngModelChange)="save()" 
                               placeholder="PLAYER_DESIGNATION" title="Assigning operator name">
                    </div>
                </div>

                <!-- Row 3: Age & Gender -->
                <div class="input-row split">
                    <div class="input-group compact">
                        <label for="initial-age">BIOLOGICAL_AGE <span class="required">*</span></label>
                        <div class="age-input-wrapper">
                            <input id="initial-age" type="number" [(ngModel)]="age" (ngModelChange)="save()" min="18"
                                   title="Standard recruitment age is 18+">
                            <span class="unit">S_YEARS</span>
                        </div>
                    </div>
                    <div class="input-group">
                        <label>PHENOTYPE_GENDER <span class="required">*</span></label>
                        <div class="gender-options">
                            <label class="gender-tab">
                                <input type="radio" name="gender" value="Male" [(ngModel)]="gender" (ngModelChange)="save()">
                                <span>MALE</span>
                            </label>
                            <label class="gender-tab">
                                <input type="radio" name="gender" value="Female" [(ngModel)]="gender" (ngModelChange)="save()">
                                <span>FEMALE</span>
                            </label>
                            <label class="gender-tab">
                                <input type="radio" name="gender" value="Non-Binary" [(ngModel)]="gender" (ngModelChange)="save()">
                                <span>N-B</span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Row 4: Description -->
                <div class="input-group description-box">
                    <label for="description">PHYSICAL_BIO_METRICS</label>
                    <textarea id="description" [(ngModel)]="description" (ngModelChange)="save()" 
                              placeholder="Record distinguishing features, height, optic color, dermal modifications..."
                              title="Physical description details"></textarea>
                </div>
            </div>
        </div>

        <!-- Right Column: Visual Recon -->
        <div class="hud-module portrait-section">
            <div class="corner-detail tl"></div>
            <div class="corner-detail tr"></div>
            <div class="corner-detail bl"></div>
            <div class="corner-detail br"></div>

            <div class="hud-box-header mini">
                <span class="index">ID_02</span>
                <h3>VISUAL_RECON_SCANNER</h3>
            </div>
            
            <div class="hud-content scanner-viewport">
                <div class="portrait-box-container">
                    <div class="scanner-line"></div>
                    <div class="portrait-box">
                        <img *ngIf="portraitUrl" [src]="portraitUrl" alt="Subject Portrait">
                        <div *ngIf="!portraitUrl" class="placeholder-glitch">
                            <span class="glitch" data-text="NO_DATA">NO_DATA</span>
                        </div>
                    </div>
                </div>
                
                <div class="portrait-controls">
                    <div class="upload-area">
                        <label class="btn-cyber-outline small-text" for="portrait-upload">
                            <span class="text">UPLOAD_LOCAL_FILE</span>
                        </label>
                        <input id="portrait-upload" type="file" (change)="onFileSelected($event)" accept="image/*" class="hidden-input">
                    </div>
                    
                    <button *ngIf="portraitUrl" class="btn-cyber-outline danger-text" (click)="removeImage()">
                        <span>PURGE_VISUAL_DATA</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

</div>

