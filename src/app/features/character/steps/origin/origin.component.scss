.origin-container {
    display: flex;
    flex-direction: column;
    gap: 3rem;
    padding: 1.5rem;
    padding-bottom: 5rem;
    max-width: 1200px;
    margin: 0 auto;
    position: relative;
    box-sizing: border-box;
}

.step-title {
    display: none; // Replaced by section-header
}

// ─────────────────────────────────────────────────────────────
// SECTION HEADER — universal numbered label bar
// ─────────────────────────────────────────────────────────────
.section-header {
    display: flex;
    align-items: center;
    gap: 0.8rem;
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid rgba(0, 243, 255, 0.1);

    .sh-idx {
        font-family: var(--font-mono);
        font-size: 0.6rem;
        color: var(--neon-cyan);
        opacity: 0.45;
        letter-spacing: 2px;
        min-width: 24px;
    }

    .sh-title {
        margin: 0;
        font-family: var(--font-header);
        font-size: 0.85rem;
        color: #fff;
        letter-spacing: 4px;
        text-transform: uppercase;
        flex: 1;
    }

    .sh-badge {
        font-family: var(--font-mono);
        font-size: 0.6rem;
        color: var(--vivid-orange);
        border: 1px solid rgba(255, 140, 0, 0.4);
        padding: 2px 8px;
        letter-spacing: 2px;
    }
}

// Old card-grid and selection-card are replaced by data-roster
.card-grid { display: none; }

// ─────────────────────────────────────────────────────────────
// DATA ROSTER — universal terminal-style selection list
// ─────────────────────────────────────────────────────────────
.data-roster {
    width: 100%;
    border: 1px solid rgba(0, 243, 255, 0.12);
    background: rgba(0, 0, 0, 0.45);
    position: relative;
    overflow: hidden;

    &::before {
        content: "";
        position: absolute;
        inset: 0;
        background:
            linear-gradient(rgba(0, 243, 255, 0.015) 1px, transparent 1px),
            linear-gradient(90deg, rgba(0, 243, 255, 0.015) 1px, transparent 1px);
        background-size: 40px 7px;
        pointer-events: none;
        z-index: 0;
    }
}

.dr-thead {
    display: grid;
    grid-template-columns: 38px 12px 1fr 100px 70px 100px 20px;
    padding: 0.3rem 1rem 0.3rem 0.8rem;
    background: rgba(0, 243, 255, 0.04);
    border-bottom: 1px solid rgba(0, 243, 255, 0.15);
    font-family: var(--font-mono);
    font-size: 0.42rem;
    letter-spacing: 3px;
    color: var(--neon-cyan);
    opacity: 0.5;
    position: relative;
    z-index: 1;
    text-transform: uppercase;
}

.dr-row {
    position: relative;
    z-index: 1;
    border-bottom: 1px solid rgba(0, 243, 255, 0.07);
    cursor: pointer;
    transition: background 0.2s;

    &::before {
        content: "";
        position: absolute;
        left: 0; top: 0; bottom: 0;
        width: 2px;
        background: var(--neon-cyan);
        opacity: 0;
        transition: opacity 0.2s;
    }

    &:hover:not(.dr-lock) {
        background: rgba(0, 243, 255, 0.03);
        &::before { opacity: 0.45; }
        .dr-name { color: #fff; }
    }

    &.dr-sel {
        background: linear-gradient(90deg, rgba(255, 238, 0, 0.05) 0%, transparent 60%);
        &::before { background: var(--cyber-yellow); opacity: 1; }
    }

    &.dr-lock { opacity: 0.35; cursor: not-allowed; filter: grayscale(0.6); }
}

.dr-strip {
    display: grid;
    grid-template-columns: 38px 12px 1fr 100px 70px 100px 20px;
    align-items: center;
    padding: 0.55rem 1rem 0.55rem 0.8rem;
    min-height: 42px;
    gap: 0;
}

.dr-id {
    font-family: var(--font-mono);
    font-size: 0.65rem;
    color: rgba(0, 243, 255, 0.32);
    letter-spacing: 1px;
}

.dr-led {
    width: 7px; height: 7px;
    border-radius: 50%;
    background: rgba(255,255,255,0.1);
    border: 1px solid rgba(255,255,255,0.15);
    transition: all 0.3s;
    flex-shrink: 0;

    &.led-on {
        background: var(--cyber-yellow);
        border-color: var(--cyber-yellow);
        box-shadow: 0 0 6px var(--cyber-yellow), 0 0 14px rgba(255,238,0,0.4);
    }

    &.led-lock { background: rgba(100,30,30,0.6); border-color: rgba(180,40,40,0.4); }
}

.dr-name {
    font-family: var(--font-header);
    font-size: 0.88rem;
    color: rgba(255,255,255,0.72);
    letter-spacing: 1px;
    text-transform: uppercase;
    padding-left: 0.8rem;
    transition: color 0.2s;
    .dr-sel & { color: #fff; text-shadow: 0 0 10px rgba(255,238,0,0.2); }
}

.dr-col {
    font-family: var(--font-mono);
    font-size: 0.62rem;
    color: var(--text-dim);
    opacity: 0.6;
    text-transform: uppercase;
    letter-spacing: 1px;

    &.dr-danger { color: var(--power-red); opacity: 1; }
    &.dr-dim    { color: var(--neon-cyan); opacity: 0.5; }
    &.dr-pos    { color: var(--neon-cyan); opacity: 1; font-weight: 700; }
    &.dr-neg    { color: var(--power-red); opacity: 0.8; }
}

.dr-status {
    font-family: var(--font-mono);
    font-size: 0.42rem;
    letter-spacing: 1px;
    color: rgba(0,243,255,0.38);
    text-align: center;
    padding: 0 0.4rem;
    white-space: nowrap;
    text-transform: uppercase;
    overflow: hidden;
    text-overflow: ellipsis;

    &.st-sel  { color: var(--cyber-yellow); }
    &.st-lock { color: rgba(200,60,60,0.6); }
}

.dr-chev {
    font-size: 0.7rem;
    color: rgba(0,243,255,0.28);
    transition: all 0.25s;
    opacity: 0.4;
    text-align: right;

    &.open { transform: rotate(90deg); color: var(--cyber-yellow); opacity: 1; }
}

.dr-expand {
    border-top: 1px solid rgba(255,238,0,0.1);
    background: linear-gradient(90deg, rgba(255,238,0,0.02), rgba(0,243,255,0.02));
    padding: 0.8rem 1rem 0.8rem 3.4rem;
    animation: expand-in 0.2s ease-out;

    .expand-desc {
        font-family: var(--font-mono);
        font-size: 0.7rem;
        line-height: 1.55;
        color: var(--text-dim);
        margin: 0 0 0.5rem 0;
    }

    .expand-warning {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.3rem 0.7rem;
        background: rgba(255,0,0,0.08);
        border-left: 2px solid var(--power-red);
        font-family: var(--font-mono);
        font-size: 0.6rem;
        color: var(--power-red);
        text-transform: uppercase;
    }
}

// World expand details
.world-expand {
    display: flex;
    flex-direction: column;
    gap: 0.4rem;

    .we-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 0.4rem;
    }

    .we-tag {
        font-family: var(--font-mono);
        font-size: 0.58rem;
        padding: 2px 8px;
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.1);
        color: var(--text-dim);
        text-transform: uppercase;
        letter-spacing: 1px;

        &.tag-warn { color: var(--power-red); border-color: rgba(255,0,0,0.3); }
        &.tag-cyan { color: var(--neon-cyan); border-color: rgba(0,243,255,0.3); }
    }

    .we-warning { font-family: var(--font-mono); font-size: 0.62rem; color: var(--power-red); margin: 0; }
    .we-info    { font-family: var(--font-mono); font-size: 0.62rem; color: var(--neon-cyan); margin: 0; }
}

// Old selection-card replaced by data-roster rows
.selection-card { display: none; }

@keyframes expand-in {
    from { opacity: 0; transform: translateY(-4px); }
    to   { opacity: 1; transform: translateY(0); }
}

// ─────────────────────────────────────────────────────────────
// CHOICE CHIPS — horizontal option selector
// ─────────────────────────────────────────────────────────────
.choice-chips {
    display: flex;
    flex-wrap: wrap;
    gap: 0.6rem;

    @media (max-width: 600px) { flex-direction: column; }
}

.choice-chip {
    flex: 1;
    min-width: 150px;
    display: flex;
    align-items: center;
    gap: 0.8rem;
    padding: 0.8rem 1rem;
    background: rgba(0,0,0,0.4);
    border: 1px solid rgba(255,255,255,0.1);
    clip-path: polygon(6px 0, 100% 0, calc(100% - 6px) 100%, 0 100%);
    cursor: pointer;
    transition: all 0.2s;
    position: relative;
    overflow: hidden;

    &::before {
        content: "";
        position: absolute; top: 0; left: -100%;
        width: 60%; height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.03), transparent);
        transition: left 0.35s;
        pointer-events: none;
    }

    &:hover:not(.chip-lock) {
        border-color: rgba(0, 243, 255, 0.38);
        background: rgba(0, 243, 255, 0.04);
        &::before { left: 140%; }
        .cc-name { color: #fff; }
    }

    &.chip-sel {
        border-color: var(--cyber-yellow);
        background: rgba(255,238,0,0.05);
        box-shadow: 0 0 15px rgba(255,238,0,0.07);

        .cc-led   { background: var(--cyber-yellow); border-color: var(--cyber-yellow); box-shadow: 0 0 6px var(--cyber-yellow); }
        .cc-name  { color: #fff; }
        .cc-desc  { color: rgba(255,255,255,0.55); }
    }

    &.chip-lock { opacity: 0.38; cursor: not-allowed; filter: grayscale(0.5); }
}

.cc-led {
    width: 7px; height: 7px;
    border-radius: 50%;
    background: rgba(255,255,255,0.1);
    border: 1px solid rgba(255,255,255,0.2);
    flex-shrink: 0;
    transition: all 0.2s;

    &.on {
        background: var(--cyber-yellow);
        border-color: var(--cyber-yellow);
        box-shadow: 0 0 8px rgba(255,238,0,0.5);
        animation: led-blink 2s steps(1,end) infinite;
    }
}

@keyframes led-blink {
    0%, 49% { opacity: 1; }
    50%, 100% { opacity: 0.35; }
}

.cc-body {
    display: flex;
    flex-direction: column;
    gap: 2px;
    flex: 1;
}

.cc-name {
    font-family: var(--font-header);
    font-size: 0.82rem;
    color: rgba(255,255,255,0.7);
    letter-spacing: 2px;
    text-transform: uppercase;
    transition: color 0.2s;
}

.cc-desc {
    font-family: var(--font-mono);
    font-size: 0.6rem;
    color: var(--text-dim);
    opacity: 0.65;
    line-height: 1.35;
}

.cc-warn {
    font-family: var(--font-mono);
    font-size: 0.45rem;
    color: var(--power-red);
    letter-spacing: 2px;
    border: 1px solid rgba(255,0,0,0.3);
    padding: 1px 5px;
    margin-left: auto;
    white-space: nowrap;
}

@keyframes pulse-border {
    0% { border-color: rgba(255, 0, 60, 0.4); }
    50% { border-color: rgba(255, 0, 60, 1); }
    100% { border-color: rgba(255, 0, 60, 0.4); }
}

// Origin type selection — styled like choice-chips
.origin-types {
    display: flex;
    flex-wrap: wrap;
    gap: 0.6rem;

    @media (max-width: 600px) { flex-direction: column; }
}

.type-card {
    flex: 1;
    min-width: 200px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 1.5rem 1rem;
    background: rgba(0,0,0,0.4);
    border: 1px solid rgba(255,255,255,0.1);
    clip-path: polygon(6px 0, 100% 0, calc(100% - 6px) 100%, 0 100%);
    cursor: pointer;
    transition: all 0.2s;
    position: relative;
    overflow: hidden;
    text-align: center;

    &::before {
        content: "";
        position: absolute; top: 0; left: -100%;
        width: 60%; height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.03), transparent);
        transition: left 0.35s;
        pointer-events: none;
    }

    h3 {
        margin: 0;
        font-family: var(--font-header);
        font-size: 0.95rem;
        color: rgba(255,255,255,0.7);
        letter-spacing: 2px;
        text-transform: uppercase;
        transition: color 0.2s;
    }

    p {
        margin: 0;
        font-family: var(--font-mono);
        font-size: 0.65rem;
        color: var(--text-dim);
        opacity: 0.65;
        letter-spacing: 0.5px;
    }

    &:hover:not(.disabled) {
        border-color: rgba(0, 243, 255, 0.38);
        background: rgba(0, 243, 255, 0.04);
        &::before { left: 140%; }
        h3 { color: #fff; }
    }

    &.selected {
        border-color: var(--cyber-yellow);
        background: rgba(255,238,0,0.05);
        box-shadow: 0 0 15px rgba(255,238,0,0.07);
        h3 { color: #fff; text-shadow: 0 0 10px rgba(255,238,0,0.3); }
        p { color: rgba(255,255,255,0.55); }
    }

    &.disabled {
        opacity: 0.38;
        cursor: not-allowed;
        filter: grayscale(0.5);
    }

    .restriction-info {
        font-family: var(--font-mono);
        font-size: 0.55rem;
        color: var(--power-red);
        margin-top: 0.3rem;
        line-height: 1.3;
    }
}

.origin-type-section {
    display: flex;
    flex-direction: column;
    gap: 1rem;

    .step-title {
        display: block !important;
        font-family: var(--font-header);
        font-size: 0.85rem;
        color: #fff;
        letter-spacing: 4px;
        text-transform: uppercase;
        margin: 0;
    }
}

// Old path-selector replaced by choice-chips
.path-selector { display: none; }


.species-adaptation-report {
    margin-top: 4rem;
    
    .adaptation-banner {
        background: rgba(0, 0, 0, 0.4);
        border: 1px solid rgba(0, 243, 255, 0.2);
        position: relative;
        overflow: hidden;
        padding: 1.5rem;
        clip-path: polygon(0 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%);

        &::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--neon-cyan), transparent);
            animation: move-gradient 3s infinite;
        }

        .banner-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            border-bottom: 1px solid rgba(0, 243, 255, 0.1);
            padding-bottom: 0.5rem;

            .title {
                font-family: var(--font-accent);
                font-size: 0.8rem;
                letter-spacing: 4px;
                color: var(--neon-cyan);
            }
        }

        .banner-content {
            .species-info {
                margin-bottom: 1rem;
                .label {
                    color: var(--text-dim);
                    font-size: 0.7rem;
                    font-family: var(--font-mono);
                    margin-right: 1rem;
                }
                .value {
                    color: var(--cyber-yellow);
                    font-family: var(--font-header);
                    font-size: 1.1rem;
                    letter-spacing: 2px;
                }
            }

            .restriction-list {
                .restriction-item {
                    color: var(--power-red);
                    font-family: var(--font-mono);
                    font-size: 0.75rem;
                    margin: 0.4rem 0;
                    letter-spacing: 1px;

                    &.success {
                        color: var(--neon-cyan);
                    }

                    .bullet {
                        margin-right: 0.5rem;
                        opacity: 0.6;
                    }
                }
            }
        }
    }
}

@keyframes move-gradient {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}

.skills-section {
    margin-top: 3rem;

    .instruction {
        color: var(--text-dim);
        font-family: var(--font-mono);
        font-size: 0.7rem;
        text-transform: uppercase;
        margin-bottom: 1.5rem;
        padding-left: 1rem;
        border-left: 2px solid var(--vivid-orange);
    }

    .skills-grid {
        display: flex;
        flex-wrap: wrap;
        gap: 0.6rem;
        margin-bottom: 2rem;
    }

    .skill-chip {
        padding: 0.5rem 1.2rem;
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.1);
        color: var(--text-dim);
        font-family: var(--font-header);
        text-transform: uppercase;
        font-size: 0.8rem;
        letter-spacing: 1px;
        cursor: pointer;
        transition: all 0.2s;
        clip-path: polygon(8px 0, 100% 0, calc(100% - 8px) 100%, 0 100%);

        &:hover:not(.disabled) {
            border-color: var(--neon-cyan);
            color: var(--neon-cyan);
            background: var(--neon-cyan-glow);
        }

        &.selected {
            background: var(--neon-cyan);
            border-color: var(--neon-cyan);
            color: var(--bg-pitch);
            box-shadow: 0 0 15px var(--neon-cyan-glow);
        }

        &.disabled {
            opacity: 0.2;
            cursor: not-allowed;
        }
    }

    .mod-summary {
        background: rgba(0, 0, 0, 0.3);
        padding: 1.5rem;
        border: 1px solid rgba(255, 140, 0, 0.2);
        position: relative;
        clip-path: polygon(0 0, 100% 0, 100% calc(100% - 15px), calc(100% - 15px) 100%, 0 100%);

        &::before {
            content: "BIOLOGICAL_ADJUSTMENT_REPORT";
            position: absolute;
            top: -10px;
            right: 20px;
            background: var(--bg-pitch);
            padding: 0 10px;
            font-family: var(--font-mono);
            font-size: 0.5rem;
            color: var(--vivid-orange);
        }

        h3 {
            margin: 0 0 0.8rem 0;
            color: var(--vivid-orange);
            font-family: var(--font-accent);
            font-size: 0.9rem;
            text-transform: uppercase;
        }

        p {
            margin: 0.3rem 0;
            font-size: 0.8rem;
            color: var(--text-main);
            font-family: var(--font-body);
            line-height: 1.5;
        }
    }

    .navigation-actions {
        margin-top: 3rem;
        display: flex;
        justify-content: center;
        padding-bottom: 2rem;

        .btn-cyber.next {
            border-color: var(--cyber-yellow);
            color: var(--cyber-yellow);
            padding: 1rem 3rem;
            font-size: 1.1rem;
            box-shadow: 0 0 15px rgba(255, 238, 0, 0.2);

            &:hover {
                background: var(--cyber-yellow);
                color: #000;
                box-shadow: 0 0 25px rgba(255, 238, 0, 0.4);
            }
        }
    }
}

.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(0, 0, 0, 0.85);
    -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: center;
    animation: fade-in 0.3s ease-out;
}

.modal-card {
    background: var(--bg-panel);
    border: 1px solid var(--neon-cyan);
    padding: 3rem;
    max-width: 600px;
    width: 90%;
    text-align: center;
    position: relative;
    clip-path: polygon(0 0, calc(100% - 30px) 0, 100% 30px, 100% 100%, 30px 100%, 0 calc(100% - 30px));
    box-shadow: 0 0 50px var(--neon-cyan-glow);

    &::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle at center, rgba(0, 243, 255, 0.1), transparent);
        pointer-events: none;
    }

    h3 {
        color: var(--neon-cyan);
        font-family: var(--font-accent);
        font-size: 1.2rem;
        letter-spacing: 5px;
        margin-bottom: 2rem;
        text-transform: uppercase;
    }

    p {
        color: var(--text-dim);
        font-family: var(--font-body);
        line-height: 1.6;
        margin-bottom: 3rem;
    }

    .choice-buttons {
        display: flex;
        gap: 1.5rem;
        justify-content: center;

        button {
            padding: 1rem 2rem;
            background: transparent;
            border: 1px solid var(--neon-cyan);
            color: var(--neon-cyan);
            font-family: var(--font-header);
            text-transform: uppercase;
            letter-spacing: 2px;
            cursor: pointer;
            transition: all 0.2s;
            clip-path: polygon(10px 0, 100% 0, calc(100% - 10px) 100%, 0 100%);

            &:hover {
                background: var(--neon-cyan);
                color: var(--bg-pitch);
                box-shadow: 0 0 20px var(--neon-cyan-glow);
            }
        }
    }
}

@keyframes fade-in {
    from { opacity: 0; }
    to { opacity: 1; }
}